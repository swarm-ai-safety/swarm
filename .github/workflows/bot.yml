name: Swarm AI Bot

on:
  issue_comment:
    types: [created]
  issues:
    types: [opened]

permissions:
  issues: write

jobs:
  respond:
    runs-on: ubuntu-latest
    # Only run if not a bot comment
    if: ${{ !contains(github.event.comment.user.login, '[bot]') && !contains(github.event.sender.login, '[bot]') }}

    steps:
      - name: Respond to bot mention in comment
        if: ${{ github.event_name == 'issue_comment' && contains(github.event.comment.body, '@swarm-ai-bot') }}
        uses: actions/github-script@v8
        with:
          script: |
            const commenter = context.payload.comment.user.login;
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.payload.issue.number,
              body: `Hi @${commenter}! ðŸ‘‹\n\nI'm here to help. A maintainer will follow up shortly.\n\n---\n*This is an automated response from swarm-ai-bot.*`
            });

      - name: Respond to feature request issue
        if: ${{ github.event_name == 'issues' && github.event.action == 'opened' && contains(github.event.issue.title, 'Feature Request') }}
        uses: actions/github-script@v8
        with:
          script: |
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.payload.issue.number,
              body: `Thanks for opening this feature request! ðŸ¤–\n\nI'm the swarm-ai-bot. A maintainer will review this soon.\n\n---\n*This is an automated response.*`
            });
