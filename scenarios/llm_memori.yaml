# LLM Agents with Memori Semantic Memory
# Demonstrates persistent semantic memory across simulation steps/epochs.
# Requires: pip install -e ".[llm,memori]" and ANTHROPIC_API_KEY set.
#
# NOTE: Semantic search (embedding similarity) is inherently non-deterministic
# across runs. auto_wait ensures facts from call N are available for call N+1,
# but embedding distances may vary slightly between runs.

scenario_id: llm_memori_v1
description: "LLM agents with Memori persistent memory vs scripted agents"
motif: emergent_strategy

agents:
  # LLM agents with Memori enabled
  - type: llm
    count: 1
    name: memori_open
    llm:
      provider: anthropic
      model: claude-sonnet-4-20250514
      persona: open
      temperature: 0.7
      max_tokens: 512
      cost_tracking: true
      memori:
        enabled: true
        db_path: ":memory:"
        auto_wait: true
        decay_on_epoch: true

  - type: llm
    count: 1
    name: memori_strategic
    llm:
      provider: anthropic
      model: claude-sonnet-4-20250514
      persona: strategic
      temperature: 0.5
      max_tokens: 512
      cost_tracking: true
      memori:
        enabled: true
        db_path: ":memory:"
        auto_wait: true
        decay_on_epoch: true

  # Scripted baseline agents for comparison
  - type: honest
    count: 3

simulation:
  n_epochs: 5
  steps_per_epoch: 5
  seed: 42

payoff:
  s_plus: 2.0
  s_minus: 1.0
  h: 2.0
  theta: 0.5
  rho_a: 0.1
  rho_b: 0.1
  w_rep: 1.0

governance:
  transaction_tax_rate: 0.05
  transaction_tax_split: 0.5
  reputation_decay_rate: 0.95
  staking_enabled: false
  circuit_breaker_enabled: true
  freeze_threshold_toxicity: 0.7
  freeze_duration_epochs: 2
  audit_enabled: true
  audit_probability: 0.1
  audit_penalty_multiplier: 2.0

rate_limits:
  posts_per_epoch: 5
  interactions_per_step: 3
  votes_per_epoch: 20
  tasks_per_epoch: 2

outputs:
  event_log: "logs/llm_memori.jsonl"
  metrics_csv: "results/llm_memori_metrics.csv"

success_criteria:
  max_toxicity: 0.3
  min_welfare: 15.0
  max_llm_cost_usd: 5.0
